# har2ammo

Генератор паторонов из `*.har` файлов в `ammo.txt` для `yandex-tank`.

## Возможности

* генерация патронов из HAR файла;
* фильтрация по домену (не генерирует патроны к внешним ресурсам);
* возможность заменять оригинальные cookies своими;
* возможность удалять все cookies;
* автоматическиое тегирование патронов;
* установка собственных заголовков;
* конфигурирование с помощью `config.json`.

## Описание config.json

**По-умолчанию файл** `config.json` имеет следующий вид:

```
{
    "autoTag": true,
    "host": null,
    "clearCookies": false,
    "customCookies": false,
    "customHeaders": [{
		"name": "User-Agent",
        "value": "yandex-tank yandex-tank/har2ammo"
    }]
}
```
где:

* `autoTag` - включить автоматическое тегирование патронов, возможные варианты - `true` | `false`. В качестве тега используется относительный путь к цели.
* `host` - имя хоста (мишени), запросы на другие хосты в ленту не попадут, возможные варианты - строка (`youdomain.com`), запросы на который, фильтр не будет блокировать | `false` - выключает фильтрацию | `null` - в качестве базового хоста будет использоваться домен, к которому был **первый** запрос в `har` файле;
* `clearCookies` - удаляет любые сookies из запросов;
* `customCookies` - позволяет использовать собственные сookies, возможные варианты - `string` | `array`. В случаи, когда передается срока - она будет использована во всех запросах. В случаи, когда используется массив - то для каждого эллемента массива, будет сгененерированна своя лента и в результате они будет сшиты в конечную ленту.
* `customHeaders` - массив обьектов, которые заменят или добавят новые заголовки.

## Использование

В самом простом случаи достаточно:

`har2ammo -i test.har -o ammo.txt`

Для более тонкой настройки - рекомендую воспользоваться файлом конфигурации `config.json`:

`har2ammo -c config.json -i test.har -o ammo.txt`

## Установка

Для работы `nar2ammo` требуются [nodejs](http://nodejs.org/) и [npm](https://npmjs.org).

Установка:

`npm install -g har2ammo`

## Лицензия
GNU General Public License v2s